"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[2184],{42184:(e,n,t)=>{t.r(n),t.d(n,{default:()=>x});var a=t(86883),o=t(56165),i=t(93944),r=t(8434),s=t(35436),l=t(85421),d=t(50833),c=t(49358),u=t(16166),g=t(90296),b=t(44148),v=t(42628),p=t(20457),m=t(49255);function h(e){Object.values(d.Debugger.CommandIDs).forEach((n=>{e.commands.hasCommand(n)&&e.commands.notifyCommandChanged(n)}))}const I={id:"@jupyterlab/debugger-extension:consoles",description:"Add debugger capability to the consoles.",autoStart:!0,requires:[d.IDebugger,s.IConsoleTracker],optional:[a.ILabShell],activate:(e,n,t,a)=>{const o=new d.Debugger.Handler({type:"console",shell:e.shell,service:n}),i=async n=>{const{sessionContext:t}=n;await t.ready,await o.updateContext(n,t),h(e)};a?a.currentChanged.connect(((e,n)=>{const t=n.newValue;t instanceof s.ConsolePanel&&i(t)})):t.currentChanged.connect(((e,n)=>{n&&i(n)}))}},f={id:"@jupyterlab/debugger-extension:files",description:"Adds debugger capabilities to files.",autoStart:!0,requires:[d.IDebugger,u.IEditorTracker],optional:[a.ILabShell],activate:(e,n,t,a)=>{const o=new d.Debugger.Handler({type:"file",shell:e.shell,service:n}),i={},r=async n=>{const t=e.serviceManager.sessions;try{const a=await t.findByPath(n.context.path);if(!a)return;let r=i[a.id];r||(r=t.connectTo({model:a}),i[a.id]=r),await o.update(n,r),h(e)}catch(e){return}};a?a.currentChanged.connect(((e,n)=>{const t=n.newValue;if(t instanceof c.DocumentWidget){const{content:e}=t;e instanceof u.FileEditor&&r(t)}})):t.currentChanged.connect(((e,n)=>{n&&r(n)}))}},y={id:"@jupyterlab/debugger-extension:notebooks",description:"Adds debugger capability to notebooks and provides the debugger notebook handler.",autoStart:!0,requires:[d.IDebugger,b.INotebookTracker],optional:[a.ILabShell,o.ICommandPalette,o.ISessionContextDialogs,m.ITranslator],provides:d.IDebuggerHandler,activate:(e,n,t,a,i,r,s)=>{const l=null!=s?s:m.nullTranslator,c=null!=r?r:new o.SessionContextDialogs({translator:l}),u=new d.Debugger.Handler({type:"notebook",shell:e.shell,service:n}),g=l.load("jupyterlab");e.commands.addCommand(d.Debugger.CommandIDs.restartDebug,{label:g.__("Restart Kernel and Debug…"),caption:g.__("Restart Kernel and Debug…"),isEnabled:()=>n.isStarted,execute:async()=>{const e=n.getDebuggerState();await n.stop();const a=t.currentWidget;if(!a)return;const{content:o,sessionContext:i}=a;await c.restart(i)&&(await n.restoreDebuggerState(e),await u.updateWidget(a,i.session),await b.NotebookActions.runAll(o,i,c,l))}});const v=async n=>{if(n){const{sessionContext:e}=n;await e.ready,await u.updateContext(n,e)}h(e)};return a?a.currentChanged.connect(((e,n)=>{const t=n.newValue;t instanceof b.NotebookPanel&&v(t)})):t.currentChanged.connect(((e,n)=>{n&&v(n)})),i&&i.addItem({category:"Notebook Operations",command:d.Debugger.CommandIDs.restartDebug}),u}},C={id:"@jupyterlab/debugger-extension:service",description:"Provides the debugger service.",autoStart:!0,provides:d.IDebugger,requires:[d.IDebuggerConfig],optional:[d.IDebuggerSources,m.ITranslator],activate:(e,n,t,a)=>new d.Debugger.Service({config:n,debuggerSources:t,specsManager:e.serviceManager.kernelspecs,translator:a})},D={id:"@jupyterlab/debugger-extension:config",description:"Provides the debugger configuration",provides:d.IDebuggerConfig,autoStart:!0,activate:()=>new d.Debugger.Config},_={id:"@jupyterlab/debugger-extension:sources",description:"Provides the source feature for debugging",autoStart:!0,provides:d.IDebuggerSources,requires:[d.IDebuggerConfig,r.IEditorServices],optional:[b.INotebookTracker,s.IConsoleTracker,u.IEditorTracker],activate:(e,n,t,a,o,i)=>new d.Debugger.Sources({config:n,shell:e.shell,editorServices:t,notebookTracker:a,consoleTracker:o,editorTracker:i})},S={id:"@jupyterlab/debugger-extension:variables",description:"Adds variables renderer and inspection in the debugger variable panel.",autoStart:!0,requires:[d.IDebugger,d.IDebuggerHandler,m.ITranslator],optional:[o.IThemeManager,v.IRenderMimeRegistry],activate:(e,n,t,a,i,r)=>{const s=a.load("jupyterlab"),{commands:l,shell:c}=e,u=new o.WidgetTracker({namespace:"debugger/inspect-variable"}),g=new o.WidgetTracker({namespace:"debugger/render-variable"}),v=d.Debugger.CommandIDs;l.addCommand(v.inspectVariable,{label:s.__("Inspect Variable"),caption:s.__("Inspect Variable"),isEnabled:e=>{var t,a,o,i;return!!(null===(t=n.session)||void 0===t?void 0:t.isStarted)&&Number(null!==(i=null!==(a=e.variableReference)&&void 0!==a?a:null===(o=n.model.variables.selectedVariable)||void 0===o?void 0:o.variablesReference)&&void 0!==i?i:0)>0},execute:async e=>{var t,a,r,s;let{variableReference:g,name:b}=e;g||(g=null===(t=n.model.variables.selectedVariable)||void 0===t?void 0:t.variablesReference),b||(b=null===(a=n.model.variables.selectedVariable)||void 0===a?void 0:a.name);const v=`jp-debugger-variable-${b}`;if(!b||!g||u.find((e=>e.id===v)))return;const p=await n.inspectVariable(g);if(!p||0===p.length)return;const m=n.model.variables,h=new o.MainAreaWidget({content:new d.Debugger.VariablesGrid({model:m,commands:l,scopes:[{name:b,variables:p}],themeManager:i})});h.addClass("jp-DebuggerVariables"),h.id=v,h.title.icon=d.Debugger.Icons.variableIcon,h.title.label=`${null===(s=null===(r=n.session)||void 0===r?void 0:r.connection)||void 0===s?void 0:s.name} - ${b}`,u.add(h);const I=()=>{h.dispose(),m.changed.disconnect(I)};m.changed.connect(I),c.add(h,"main",{mode:u.currentWidget?"split-right":"split-bottom",activate:!1,type:"Debugger Variables"})}}),l.addCommand(v.renderMimeVariable,{label:s.__("Render Variable"),caption:s.__("Render variable according to its mime type"),isEnabled:()=>{var e;return!!(null===(e=n.session)||void 0===e?void 0:e.isStarted)},isVisible:()=>n.model.hasRichVariableRendering&&(null!==r||t.activeWidget instanceof b.NotebookPanel),execute:e=>{var o,i,s,l,u,v,p,m;let{name:h,frameId:I}=e;h||(h=null===(o=n.model.variables.selectedVariable)||void 0===o?void 0:o.name),I||(I=null===(i=n.model.callstack.frame)||void 0===i?void 0:i.id);const f=t.activeWidget;let y=f instanceof b.NotebookPanel?f.content.rendermime:r;if(!y)return;const C=`jp-debugger-variable-mime-${h}-${null===(l=null===(s=n.session)||void 0===s?void 0:s.connection)||void 0===l?void 0:l.path.replace("/","-")}`;if(!h||g.find((e=>e.id===C))||!I&&n.hasStoppedThreads())return;const D=n.model.variables,_=new d.Debugger.VariableRenderer({dataLoader:()=>n.inspectRichVariable(h,I),rendermime:y,translator:a});_.addClass("jp-DebuggerRichVariable"),_.id=C,_.title.icon=d.Debugger.Icons.variableIcon,_.title.label=`${h} - ${null===(v=null===(u=n.session)||void 0===u?void 0:u.connection)||void 0===v?void 0:v.name}`,_.title.caption=`${h} - ${null===(m=null===(p=n.session)||void 0===p?void 0:p.connection)||void 0===m?void 0:m.path}`,g.add(_);const S=()=>{_.dispose(),D.changed.disconnect(w),null==f||f.disposed.disconnect(S)},w=()=>{t.activeWidget===f&&_.refresh()};_.disposed.connect(S),D.changed.connect(w),null==f||f.disposed.connect(S),c.add(_,"main",{mode:g.currentWidget?"split-right":"split-bottom",activate:!1,type:"Debugger Variables"})}}),l.addCommand(v.copyToClipboard,{label:s.__("Copy to Clipboard"),caption:s.__("Copy text representation of the value to clipboard"),isEnabled:()=>{var e,t;return!!(null===(e=n.session)||void 0===e?void 0:e.isStarted)&&!!(null===(t=n.model.variables.selectedVariable)||void 0===t?void 0:t.value)},isVisible:()=>t.activeWidget instanceof b.NotebookPanel,execute:async()=>{const e=n.model.variables.selectedVariable.value;e&&o.Clipboard.copyToSystem(e)}}),l.addCommand(v.copyToGlobals,{label:s.__("Copy Variable to Globals"),caption:s.__("Copy variable to globals scope"),isEnabled:()=>{var e;return!!(null===(e=n.session)||void 0===e?void 0:e.isStarted)},isVisible:()=>t.activeWidget instanceof b.NotebookPanel&&n.model.supportCopyToGlobals,execute:async e=>{const t=n.model.variables.selectedVariable.name;await n.copyToGlobals(t)}})}},w={id:"@jupyterlab/debugger-extension:sidebar",description:"Provides the debugger sidebar.",provides:d.IDebuggerSidebar,requires:[d.IDebugger,r.IEditorServices,m.ITranslator],optional:[o.IThemeManager,p.ISettingRegistry],autoStart:!0,activate:async(e,n,t,a,o,i)=>{const{commands:r}=e,s=d.Debugger.CommandIDs,l={registry:r,continue:s.debugContinue,terminate:s.terminate,next:s.next,stepIn:s.stepIn,stepOut:s.stepOut,evaluate:s.evaluate},c={registry:r,pauseOnExceptions:s.pauseOnExceptions},u=new d.Debugger.Sidebar({service:n,callstackCommands:l,breakpointsCommands:c,editorServices:t,themeManager:o,translator:a});if(i){const e=await i.load(k.id),t=()=>{var t,a,o,i;const r=e.get("variableFilters").composite,s=null!==(i=null===(o=null===(a=null===(t=n.session)||void 0===t?void 0:t.connection)||void 0===a?void 0:a.kernel)||void 0===o?void 0:o.name)&&void 0!==i?i:"";s&&r[s]&&(u.variables.filter=new Set(r[s]));const l=e.get("defaultKernelSourcesFilter").composite;u.kernelSources.filter=l};t(),e.changed.connect(t),n.sessionChanged.connect(t)}return u}},k={id:"@jupyterlab/debugger-extension:main",description:"Initialize the debugger user interface.",requires:[d.IDebugger,d.IDebuggerSidebar,r.IEditorServices,m.ITranslator],optional:[o.ICommandPalette,d.IDebuggerSources,a.ILabShell,a.ILayoutRestorer,g.ILoggerRegistry,p.ISettingRegistry],autoStart:!0,activate:async(e,n,t,a,r,s,c,u,g,b,p)=>{var m;const I=r.load("jupyterlab"),{commands:f,shell:y,serviceManager:C}=e,{kernelspecs:D}=C,_=d.Debugger.CommandIDs;if("true"!==l.PageConfig.getOption("alwaysShowDebuggerExtension").toLowerCase()){await D.ready;const e=null===(m=D.specs)||void 0===m?void 0:m.kernelspecs;if(!e)return;const n=Object.keys(e).some((n=>{var t,a,o;return!(null===(o=null===(a=null===(t=e[n])||void 0===t?void 0:t.metadata)||void 0===a?void 0:a.debugger)||void 0===o||!o)}));if(!n)return}const S=new v.RenderMimeRegistry({initialFactories:v.standardRendererFactories});f.addCommand(_.evaluate,{label:I.__("Evaluate Code"),caption:I.__("Evaluate Code"),icon:d.Debugger.Icons.evaluateIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{var e,t,o;const r=await(async()=>{var e,t,o;const i=null===(t=null===(e=n.session)||void 0===e?void 0:e.connection)||void 0===t?void 0:t.kernel;if(!i)return"";const r=(await i.info).language_info.name;return null!==(o=a.mimeTypeService.getMimeTypeByLanguage({name:r}))&&void 0!==o?o:""})(),s=await d.Debugger.Dialogs.getCode({title:I.__("Evaluate Code"),okLabel:I.__("Evaluate"),cancelLabel:I.__("Cancel"),mimeType:r,contentFactory:new i.CodeCell.ContentFactory({editorFactory:e=>a.factoryService.newInlineEditor(e)}),rendermime:S}),l=s.value;if(!s.button.accept||!l)return;const c=await n.evaluate(l);if(c){const a=c.result,i=null===(t=null===(e=null==n?void 0:n.session)||void 0===e?void 0:e.connection)||void 0===t?void 0:t.path,r=i?null===(o=null==b?void 0:b.getLogger)||void 0===o?void 0:o.call(b,i):void 0;r?r.log({type:"text",data:a,level:r.level}):console.debug(a)}}}),f.addCommand(_.debugContinue,{label:()=>n.hasStoppedThreads()?I.__("Continue"):I.__("Pause"),caption:()=>n.hasStoppedThreads()?I.__("Continue"):I.__("Pause"),icon:()=>n.hasStoppedThreads()?d.Debugger.Icons.continueIcon:d.Debugger.Icons.pauseIcon,isEnabled:()=>{var e,t;return null!==(t=null===(e=n.session)||void 0===e?void 0:e.isStarted)&&void 0!==t&&t},execute:async()=>{n.hasStoppedThreads()?await n.continue():await n.pause(),f.notifyCommandChanged(_.debugContinue)}}),f.addCommand(_.terminate,{label:I.__("Terminate"),caption:I.__("Terminate"),icon:d.Debugger.Icons.terminateIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.restart(),h(e)}}),f.addCommand(_.next,{label:I.__("Next"),caption:I.__("Next"),icon:d.Debugger.Icons.stepOverIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.next()}}),f.addCommand(_.stepIn,{label:I.__("Step In"),caption:I.__("Step In"),icon:d.Debugger.Icons.stepIntoIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.stepIn()}}),f.addCommand(_.stepOut,{label:I.__("Step Out"),caption:I.__("Step Out"),icon:d.Debugger.Icons.stepOutIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.stepOut()}}),f.addCommand(_.pauseOnExceptions,{label:e=>e.filter||"Breakpoints on exception",caption:e=>e.description,isToggled:e=>{var t;return(null===(t=n.session)||void 0===t?void 0:t.isPausingOnException(e.filter))||!1},isEnabled:()=>n.pauseOnExceptionsIsValid(),execute:async e=>{var t,a,i;if(null==e?void 0:e.filter){let t=e.filter;await n.pauseOnExceptionsFilter(t)}else{let e=[];null===(a=null===(t=n.session)||void 0===t?void 0:t.exceptionBreakpointFilters)||void 0===a||a.forEach((n=>{e.push(n.filter)}));const r=await o.InputDialog.getMultipleItems({title:I.__("Select a filter for breakpoints on exception"),items:e,defaults:(null===(i=n.session)||void 0===i?void 0:i.currentExceptionFilters)||[]});let s=r.button.accept?r.value:null;null!==s&&await n.pauseOnExceptions(s)}}});let w=!1;if(p){const e=await p.load(k.id),n=()=>{w=e.get("autoCollapseDebuggerSidebar").composite};n(),e.changed.connect(n)}if(n.eventMessage.connect(((n,a)=>{h(e),u&&"initialized"===a.event?u.activateById(t.id):u&&t.isVisible&&"terminated"===a.event&&w&&u.collapseRight()})),n.sessionChanged.connect((n=>{h(e)})),g&&g.add(t,"debugger-sidebar"),t.node.setAttribute("role","region"),t.node.setAttribute("aria-label",I.__("Debugger section")),t.title.caption=I.__("Debugger"),y.add(t,"right",{type:"Debugger"}),f.addCommand(_.showPanel,{label:I.__("Debugger Panel"),execute:()=>{y.activateById(t.id)}}),s){const e=I.__("Debugger");[_.debugContinue,_.terminate,_.next,_.stepIn,_.stepOut,_.evaluate,_.pauseOnExceptions].forEach((n=>{s.addItem({command:n,category:e})}))}if(c){const{model:e}=n,t=new d.Debugger.ReadOnlyEditorFactory({editorServices:a}),o=(e,t)=>{var a,o,i,r,s,l,u,g,b;c.find({focus:!0,kernel:null!==(r=null===(i=null===(o=null===(a=n.session)||void 0===a?void 0:a.connection)||void 0===o?void 0:o.kernel)||void 0===i?void 0:i.name)&&void 0!==r?r:"",path:null!==(u=null===(l=null===(s=n.session)||void 0===s?void 0:s.connection)||void 0===l?void 0:l.path)&&void 0!==u?u:"",source:null!==(b=null===(g=null==t?void 0:t.source)||void 0===g?void 0:g.path)&&void 0!==b?b:""}).forEach((e=>{requestAnimationFrame((()=>{e.reveal().then((()=>{const n=e.get();n&&d.Debugger.EditorHandler.showCurrentLine(n,t.line)}))}))}))},i=(e,a,o)=>{var i,r,s,u,g,b,v;if(!a)return;const{content:p,mimeType:m,path:h}=a,I=c.find({focus:!0,kernel:null!==(u=null===(s=null===(r=null===(i=n.session)||void 0===i?void 0:i.connection)||void 0===r?void 0:r.kernel)||void 0===s?void 0:s.name)&&void 0!==u?u:"",path:null!==(v=null===(b=null===(g=n.session)||void 0===g?void 0:g.connection)||void 0===b?void 0:b.path)&&void 0!==v?v:"",source:h});if(I.length>0)return void(o&&void 0!==o.line&&I.forEach((e=>{e.reveal().then((()=>{var n;null===(n=e.get())||void 0===n||n.revealPosition({line:o.line-1,column:o.column||0})}))})));const f=t.createNewEditor({content:p,mimeType:m,path:h}),y=f.editor,C=new d.Debugger.EditorHandler({debuggerService:n,editorReady:()=>Promise.resolve(y),getEditor:()=>y,path:h,src:y.model.sharedModel});f.disposed.connect((()=>C.dispose())),c.open({label:l.PathExt.basename(h),caption:h,editorWrapper:f});const D=n.model.callstack.frame;D&&d.Debugger.EditorHandler.showCurrentLine(y,D.line)},r=(e,n,t)=>{n&&i(null,n,t)};e.callstack.currentFrameChanged.connect(o),e.sources.currentSourceOpened.connect(i),e.kernelSources.kernelSourceOpened.connect(r),e.breakpoints.clicked.connect((async(e,t)=>{var a;const o=null===(a=t.source)||void 0===a?void 0:a.path,r=await n.getSource({sourceReference:0,path:o});i(null,r,t)}))}}},x=[C,I,f,y,S,w,k,_,D]}}]);